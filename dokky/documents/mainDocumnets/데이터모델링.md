## 1. 개념적 데이터 모델링

![image](https://user-images.githubusercontent.com/35983608/174785790-195edae5-a2e8-4d3c-aff7-52e0c687f939.png)

[개념적 데이터 모델링 상세 보러가기](https://viewer.diagrams.net/?tags=%7B%7D&highlight=0000ff&edit=_blank&layers=1&nav=1#R7V1dc6M4Fv01PMaFkPjQI3bSszW7XTs1PVXb%2FbTljunYtbbJ2mSSzK9fBBIf4mIIRkJeOpUHEFjG5x5JV%2FceCQuvDm%2B%2FnNbP28%2FxJtpbjr15s%2FC95TiIOI7F%2Fu3NOy%2BhGOUlT6fdhpeVBV92f0W80OalL7tNdK7dmMTxPtk91wsf4%2BMxekxqZevTKX6t3%2FYj3te%2F9Xn9FDUKvjyu983Sf%2B02yTYvDRy%2FLP9btHvaim9GHs2vHNbiZv5Lztv1Jn6tFOEHC69OcZzkR4e3VbRn6Alc8s99arlaPNgpOiZ9PvCPX18Pv3rup3%2F%2FeQj%2Bjl5IcvrPP%2B94LX%2Bu9y%2F8B1uOt0%2FrW27Z0RM7sh5CaxlYgS0upd9RuZr%2FuORdIPa63SXRl%2Bf1Izt%2FTWnBKksO%2B%2FQMpYfr83Nupx%2B7t2hTVFD9HeKholMSvVWK%2BO%2F6JYoPUXJ6T28RVzHHmLMMB%2Fz8tWIyXrStWEuUrTlJnoqaSxzTAw7lB2B1esF6b9HQClbWw8qiS4uaiy%2F26vgiNDG%2BuBe%2BSwYuxebz16USf%2BnE%2BJJ2fHGJbwrug0UROwiItURVfHErvqdtfPj%2Bkj7xsgPpH%2FEx%2BcI%2FZ4%2BAsmPXUXbwxCi7JqA8Bn2RYcB6PYENPN79soN784DFrmHjGoL8BQmg6LgJmeOVnh3jY1QH5RS%2FHDes20xbNF5Gb7vkKzteuPzsW%2BXK%2FVv15J2fnJP1KRFf8PD7X9Ep%2FiP%2BvD6%2Bi2ufduw3Zfe2muAcv5weo26%2FKNrUvMOmoSqGcAFDiLJTtF8nuz%2FrPiVkHf4Nv8W79IlL%2F8aXeEAkA%2Be%2Fh3%2Bq6gNKFRXOqGipVKooBfApShoVpXiv3yu3PbMbzh94YNk3lZ9L7pr92v3pQf4EJXMLG1xBZsiLuILMx%2FRxvlZPvpXUZqcln7Ozd6veCFC1CRQNolcjyJ9sdPbnZOjuZw1pJY40DBE8tJV4Ld1uRysZjZiQY9BOTKkT7Cbonb2wbafOUkw7ecrOfotOu%2FTnRaeicNOHcZ1MwkYxiUjzSeIMZBIJJCb5mpkEeUJjdHFlr%2FatRhaYOtd1V53kcc0iD6nbHLlDySPNCpGtZrB2XfiB1Q6%2B%2Fgf7OFWjb60DqzikadMpx2PWYxJ0cUhmJ3LvOHwEJj2p7xhFfXngdIZSH8szSkXUd1raqlrqB2o6ZTTM7zRv8oVvst%2F32oLQHyW%2FKzsNisgvP7CeSRdtkp%2BFuFwW3GIH99aSsNAtJey%2F0S72%2B93zOeoZPMyzSciWgomklZr9QzPSBPfO5zVUuEYArslTkvEyDjaA69Ja0gzX9MBmAXB24FhBkOUeAhYVHw3gETBFqBtUqAGrAxUId7GsQvpPswNihYRHaIMRyToGlp5pBHXAhr8MWeKLhWDTJr8yCkI5KDU9hEDAKu8yWdNOW7THeRmGVuCahSUxDUsgxcXyhJiPQ6GTpQaM7i%2BdoAeork5QgcAVAzUfe%2FJu0hWjvFmNHYtnN4agQOiGNW0%2Fo%2BMqO7BFSepU5ceIdaIMcp%2BRlSMd8KuBY4U2%2F6xhfS32ZPi9Bvw%2BAL%2BcCBkPfiA%2B0QF%2F4byuGMyFO0uDWzcOwaYZB5hB1zpvm00ocly5B5zagWbwF1n03GK%2BFebdvGeJ3tQQ1F23G3VPK%2BrA1I2nzNnPryHn%2FfclFhfuzhkwYXoDsp%2FfMnTE9QtiKGDszb%2Fs%2B%2Bm6ryrT%2FPljtyT6p3U9OwcjrRMhDM0uwQaXDfKsI8s1V8ENtDO7u51BYCtrZ%2BRj6b%2Bu%2BGBvyAyJo0nZiDupgt5RNHq5HsWZNzJu5m2uRpSqIZqN%2BLEk1f%2BbEQO6EGr2K%2B0I1KTblOMmXW7NlAiTsWwJVaXbmJAnOiNj%2BqM1TKgqzcZ0Ad9yRsZ00GjGhKrSbcxxBcI3Z0x3PGMCVek2pjNrY2LbWaBxjAlVpduY46qdb86YZDQHCKpKtzGhBVrzMSaRM7MDLdmoB3t6zTjvSA%2Fx2BBnl3%2FuOFbtqFa3kWceCXJGc4mgqnQbc94Roa6g6uDgrG4zzjsaJI97hfDuw64QbbRIRSsK5UemlxcUituValldWMsaLK0wX7ftcTkADZmWlV0KMjmAzLQpsl%2Fvok9tLinWmlr0gPBPnjxc2pWEoc1FrHRZSt6cSpox1xCHyCxw3Sa4kFBCHbiQgHXFYFratZS7gcQE1rrrJSYQ%2FWCCVZo16numZAtWPAse5gIfjyW5TQLRAQioF0RIsiq2Y1GorhxN7i%2BAnJyNLXrVgEsrmQJjxbW%2FITWKhMVirsmwg2SpjW1VeIkYa4wW%2Bcv7QEw2vkAi1cvIaljrMway%2FtTIQvrTYh8roRgt3EvDmnzhrU%2FW5CGFaJOYZspu5f0rJgOxZX6T%2BYqF6s9wEL2JQRS9huyCO2yEqfWG5k4SCbAfnV4Q551WRlLwwxu6s41cUSEg1xR386HpQGObRiPbgDe1F%2BvPO%2BfndjD3iiawwNLTqG4F8077yZakZTr9amOmddHqH9Fr2Jmn%2BurGwM54hmV1TWnYeQtOJcMSRGoJdrGX07VGJmLjO01WDQDXfMZWJYqsSjRbdd5zBdmqviKr%2Bpqt6vy0aom%2Ba6uxarEWUpdVf85pqujjulWdkYyKNRv1pxdcRZ%2BqMSrVbNSZC9%2BkAJyjxKieo9mo85bBNecfI42q8vbRmuc1dN7zGvndA64aXwm7mq0673mNbNVAkVUDzVad97xGsqrrqXGWPM1G7ZXm4ruCrZjElWtaV7zQ4E0HfWknx8k1rhSYQwI5RbNBlV%2BwN3XCnfZJURkEWLFj1mSAwds1NlloomqrDdSp1cMUEsHdtHCzpROF5MV6O9Fb1su10HdyESKF9HOQ2qW6S2i%2B3oULuYNb4rS0aSEkoaU64S%2B8wGvxN1yy3IY%2FIA7XjD80Y80333y58H7TvnLxYhvPFyP38JT7eGgZhNY%2BHonp1E3qeds6%2BalF0siGd%2BXvFvh66wPD6%2Fj9%2FGwcd2WUp1ZRIxua5d3KWts2VKee5SHoFahsYHTEstCl2LL8BifRk88JEWpdtLes%2BxrSwmZDVzULnKX0BrSEHHortUKcodkLGG%2FLgm18oaRtha7oKMTG8KaNdnKwbep5IgLf3wVCHWZb74el52YUsFJfMbm6H4lGNNtEgGSQoUtc5IoQ9Rd6o%2F%2FIgeY945my7VWnGGNrwCucW5nR%2Bf5FMQE2lEKNl4b2ppC8QqHnCxjHIxAwUbtBApnKC0wWA7PFDRcTN5c4KCeH2o08504ObzxyeBOQQ62gdubkYAKxkciRa800k0PtusO5k4OMRw4yATnUqrbnTg4%2FJUdlS1p5ncVgpnQs71HOGrWy8Jmzhi3zUcGaruVDylkzb915w8xsFhFUFjcPtLIcl9W87geBL4icr1kz4XnQvma9t13lxL5m4XmxnOGnXXP8A0V21Sw9R3iaMJPbMXS38qE7IImNJk6mblfQz2tWtyM8TQRKHW%2BKBKKpxKFqiKN5DSnC817u3Yg10pHce1lNrN2u897QquEgSKuDx7JrvgmSZtNOExZS2ddTo8njXbFrlkwYbwrCzHujAE9a0UgcenHjsqGyBoK1b1uIMBS2yVXYW6cUdIeZrm2ViQTdTFFVKLUrt8mc6NAArc%2FP0SMz1Y%2FdGyPHKCKgtte%2FdQjZRNn4IiAMRVAgxfyNauI9KRAJCGAhORtRBrio%2BTLgTUbbQuKd6eVDNxd0mw2%2B7P5PD%2F7HdFIPv6djxR%2Fx5%2FXx%2FdKIUbgUd%2FbCTrusml%2FheWRI4iB9ik879uvys7dd8pV%2FNzuuuCzpWVkvO%2Bl0WPIB4CJMpK9rg82axhLJHUE2XaDaYDhsLHQpXQSkkr6ofwuyF0HF%2Be4ZBW9%2FIdno4yhxlLpIgp4lJb9VGQnSs%2FTDF45bbTJoqCPezWsx2N0crz1X5vVIWlVXqke1Q0cUB%2FIGEPGaftI2iiVy0jUY6vmL8G4hDtFMEihox71%2BXPpIxWqW1Cn1s%2FeglV4%2FbvWHTtv48P3l3O0PjeD%2FuFK%2BpeeyFXXePhk3tgLHUro68HPKn6TmYolCyONJPaq612P7%2FuWBJT3pLcPobONO3xFDkNaQvoDII8bQF666pN4ZIFWvW6XwEDfwfarp6SmOk%2BrtaQvffo43Ebvjfw%3D%3D)


## 2. 논리적 데이터 모델링( 관계형 데이터 모델링 )

![Relational_1](https://user-images.githubusercontent.com/35983608/175796951-5b0d7ca8-b50b-452d-bf92-15a724d54169.png)


## 3. 물리적 데이터 모델링

### 1) 게시판  
create table `DK_BOARD` (  
	
  `category` number(10,0) not null,  -- 0~5번 게시판  
  `board_num` number(10,0),	--PK --글번호  
  `title` varchar2(200) not null,	--글제목  
  `nickName` varchar2(50) not null,	--작성자 닉네임  
  `userId` varchar2(50) not null,	-- 작성자 아이디  
  `content` varchar2(4000) not null,	--글 내용  
  `regDate` date default sysdate,	--글 작성날짜  
  `updateDate` date default sysdate,	-- 글 수정 날짜  
  `likeCnt` number(10,0) default 0,	-- 좋아요 수  
  `dislikeCnt` number(10,0) default 0,	--싫어요 수  
  `money` number(10,0) default 0,	--기부금액  
  `hitCnt` number(10,0) default 0,	--조회수  
  `replyCnt` number(10,0) default 0,	--댓글수  
  constraint `PK_DK_BOARD` primary key(board_num), --PK  
  constraint fk_dk_board_userId foreign key(userId) references dk_member(userId)      
  
);  
	
create sequence `seq_dk_board`;    
	
---

### 2) 댓글  
create table `DK_REPLY` (  
	
`reply_num` number(10,0), --pk  
`board_num` number(10,0) not null, --게시글 번호    
`reply_content` varchar2(4000) not null, --댓글 내용  
`nickName` varchar2(50) not null,  --댓글 작성자 닉네임  
`userId` varchar2(50) not null, --댓글 작성자 아이디  
`toUserId` varchar2(50), --댓글의 답글 보낼 아이디  
`toNickName` varchar2(50), --댓글의 답글 보낼 닉네임  
`replyDate` date default sysdate, --작성날짜  
`updateDate` date default sysdate, --수정날짜  
`likeCnt` number(10,0) default 0, --좋아요 수  
`dislikeCnt` number(10,0) default 0, --싫어요 수  
`money` number(10,0) default 0, --기부금  
`group_num` number(10,0) not null, --댓글 묶음 번호 , 그룹을 이루는 번호  
`order_step` number(10,0) not null, --댓글 출력 순서  
`depth` number(10,0) not null --댓글 깊이 depth = 루트글인지,답변글인지,답변에 답변글  
constraint `pk_dk_reply` primary key(reply_num) --PK,  
constraint `fk_reply_board` foreign key(board_num) references dk_board(board_num) on delete cascade,  
constraint fk_dk_reply_userId foreign key(userId) references dk_member(userId),  
constraint fk_dk_reply_toUserId foreign key(toUserId) references dk_member(userId)  

);  

create sequence `seq_dk_reply`  

create index `idx_reply` on `DK_REPLY`(board_num desc, reply_num asc);  

---
	
### 3) 회원   
create table `dk_member`(  

  `member_num` number(10,0) unique,  
  `userId` varchar2(50),  
  `userPw` varchar2(100) not null,  
  `nickName` varchar2(100) not null unique,  
  `cash` number(10,0) default 0,  
  `bankName` varchar2(50),  
  `account` varchar2(50),  
  `regDate` date default sysdate,   
  `preLoginDate` date default sysdate,  --가장 마지막 이전의 로그인 날짜
  `lastLoginDate` date default sysdate,  -- 가장 마지막 로그인날짜
  `enabled` char(1) default '1', -- 계정의 활성 비활성 여부 
  `accountNonLocked` char(1) default '1', -- 계정의 잠금 여부
  constraint `PK_DK_MEMBER` primary key(userId) --PK
  
);  
	      
create sequence `seq_dk_member`  

---

### 4) 권한   
create table `dk_member_auth` (  

`userId` varchar2(50) not null,  
`auth` varchar2(50) default 'ROLE_USER',    
constraint `pk_member_auth` PRIMARY KEY(userId, auth),  
constraint `fk_member_auth` foreign key(userId) references `dk_member`(userId) on delete cascade  

);  
	     
	  
---

### 5) 쪽지   
create table `DK_NOTE` (  

`note_num` number(10,0), --PK 쪽지 번호  
`content` varchar2(4000) not null, --쪽지 내용  
`from_nickname` varchar2(50) not null, --보낸 닉네임  
`from_id` varchar2(50) not null, --보낸 아이디  
`to_nickname` varchar2(50) not null, --받는 닉네임  
`to_id` varchar2(50) not null, --받는 아이디  
`regdate` date default sysdate, --쪽지 작성날짜  
`read_check` varchar2(10) DEFAULT 'NO', --쪽지 읽음 체크  
`from_check` varchar2(10) DEFAULT 'NO', --보낸쪽지함 삭제 체크  
`to_check` varchar2(10) DEFAULT 'NO', --받은쪽지함 삭제 체크  
constraint `PK_DK_NOTE` primary key(note_num), --PK  
constraint fk_dk_note_from_id foreign key(from_id) references dk_member(userId),  
constraint fk_dk_note_to_id foreign key(to_id) references dk_member(userId)    

);  


create sequence `seq_dk_note`;  

---

### 6) 업로드   
create table `dk_attach`(  

`uuid` varchar2(100) primary key, --pk
`uploadPath` varchar2(200) not null, -- 실제 파일이 업로드된 경로  
`fileName` varchar2(100) not null, --파일 이름을 의미  
`fileType` char(1) default 'I', --이미지 파일 여부를판단  
`board_num` number(10,0) not null, -- 해당 게시물 번호를 저장  
constraint fk_board_attach foreign key(board_num) references DK_BOARD(board_num) on delete cascade --fk  

);  

---

### 7) rememberme 자동로그인
create table `persistent_logins` (   

`username`varchar(64) not null,  
`series` varchar(64) primary key,  
`token` varchar(64) not null,  
`last_used` timestamp not null,
constraint fk_persistent_logins_username foreign key(username) references dk_member(userId)  

);  

---
	     
	     
### 8) 게시글 좋아요     
create table `dk_board_like` (  

`userId` varchar2(50) not null,  
`board_num` number(10,0) not null,  
constraint `fk_board_like` foreign key(board_num) references `DK_BOARD`(board_num) on delete cascade,  
constraint fk_board_like_userId foreign key(userId) references dk_member(userId)  

);  

---

### 9) 게시글 싫어요  
create table `dk_board_dislike` (   

`userId` varchar2(50) not null,  
`board_num` number(10,0) not null,  
constraint `fk_board_dislike` foreign key(board_num) references `DK_BOARD`(board_num) on delete cascade,  
constraint fk_board_dislike_userId foreign key(userId) references dk_member(userId)  

);  

---

### 10) 댓글 좋아요   
create table `dk_reply_like` (   

`userId` varchar2(50) not null,  
`reply_num` number(10,0) not null,  
constraint `fk_reply_like` foreign key(reply_num) references `DK_REPLY`(reply_num) on delete cascade,  
constraint fk_dk_reply_like_userId foreign key(userId) references dk_member(userId)     

);  

---

### 11) 댓글 싫어요   
create table `dk_reply_dislike` (   

`userId` varchar2(50) not null,  
`reply_num` number(10,0) not null,  
constraint `fk_reply_dislike` foreign key(reply_num) references `DK_REPLY`(reply_num) on delete cascade,  
constraint fk_dk_reply_dislike_userId foreign key(userId) references dk_member(userId)  

);  

---

### 12) 스크랩   
create table `dk_scrap` (  

`scrap_num` number(10,0) primary key,  
`userId` varchar2(50) not null,  
`board_num` number(10,0) not null,  
`regDate` date default sysdate,  
constraint `fk_dk_scrap` foreign key(board_num) references `dk_board`(board_num) on delete cascade,  
constraint fk_dk_scrap_userId foreign key(userId) references dk_member(userId)  
	     
);  

create sequence `seq_dk_scrap`  

---

### 13) 캐시내역   
create table `dk_cash` (  

`cash_num` number(10,0), --pk  
`cashKind` varchar2(50) not null, --충전,환전,기부하기,기부받기  
`cashAmount` number(10,0) not null,  
`regDate` date default sysdate,   
`userId` varchar2(50) not null,  
`nickName` varchar2(50),
`specification` varchar2(50), --미승인/승인완료  
`board_num` number(10,0) default 0,  
`reply_num` number(10,0) default 0,  
constraint `pk_dk_cash` PRIMARY KEY (cash_num),  
constraint fk_dk_cash_userId foreign key(userId) references dk_member(userId)    

);  
	
create sequence `seq_dk_cash`  

---

### 14) 신고    
create table `dk_report` (  
	
`report_num` number(10,0), --pk  
`reportKind` varchar2(50) not null, --게시글,댓글  
`reportingId` varchar2(50) not null, --신고 하는자 아이디  
`reportingNick` varchar2(50) not null, --신고 하는자 닉네임  
`reportedId` varchar2(50) not null, --신고 받는자 아이디  
`reportedNick` varchar2(50) not null, --신고 받는자 닉네임  
`board_num` number(10,0) default 0, --글번호    
`reason` varchar2(200) not null, --사유  
`regDate` date default sysdate, --신고날짜  
constraint `pk_dk_report` PRIMARY KEY (report_num),  
constraint fk_dk_report_reportingId foreign key(reportingId) references dk_member(userId),  
constraint fk_dk_report_reportedId foreign key(reportedId) references dk_member(userId)  

);  

create sequence `seq_dk_report`  
	
---

### 15) 알림   
CREATE TABLE `dk_alarm`(  
 
`alarmNum` number(10,0), --기본키  
`checking` VARCHAR2(10) DEFAULT 'NO',  
`target` VARCHAR2(50) NOT NULL,  
`writerNick` VARCHAR2(50) NOT NULL,  
`writerId` VARCHAR2(50) NOT NULL,  
`kind` VARCHAR2(10) NOT NULL, --1~9  
`commonVar1` VARCHAR2(200),  
`commonVar2` VARCHAR2(200),  
`commonVar3` number(10,0),
`regdate` date default sysdate,  
constraint `pk_dk_alarm` PRIMARY KEY (alarmNum),  
constraint fk_dk_alarm_target foreign key(target) references dk_member(userId),  
constraint fk_dk_alarm_writerId foreign key(writerId) references dk_member(userId)   

);  

create sequence `seq_dk_alarm`  

### 16) 채팅룸     
create table `dk_chat_room`(  
 
`chatRoomNum` number(10,0) PRIMARY KEY, --기본키 pk
`chat_title` VARCHAR2(50), -- 방 제목  
`roomOwnerId` VARCHAR2(50) NOT NULL, --방장 아이디  
`roomOwnerNick` VARCHAR2(50) NOT NULL, --방장 닉네임  
`chat_type` number NOT NULL, -- 채팅방의 타입 ( 0 = 1:1채팅방 , 1 = 그룹 채팅방)   
`headCount` number NOT NULL, -- 방의 총 인원수
constraint fk_dk_chat_room_roomOwnerId foreign key(roomOwnerId) references dk_member(userId)    

);  

create sequence `seq_dk_chat_room`;  

### 17) 채팅룸의 멤버     
create table `dk_chat_member`(  
 
`chatRoomNum` number(10,0) not null, --fk  
`chat_memberId` VARCHAR2(50) NOT NULL, -- 채팅룸 멤버 아이디  
`chat_memberNick` VARCHAR2(50) NOT NULL, -- 채팅룸 멤버 닉네임  
`recentOutDate` date, --방에서 나간 최근 날짜  
`present_position` number default 0, --(현재 멤버의 위치) 0 = 방에서 안나감 , 1 = 방에서 나감  
constraint `fk_dk_chat_member` foreign key(`chatRoomNum`) references `dk_chat_room(chatRoomNum)` on delete cascade,  
constraint fk_chat_member_chat_memberId foreign key(chat_memberId) references dk_member(userId)    

); 

### 18) 채팅 내용  
create table `dk_chat_content`(  
 
`chatContentNum` number(10,0), --pk  
`chatRoomNum` number(10,0) not null, --fk  
`chat_content` varchar2(4000) not null, --채팅 내용  
`chat_writerId` VARCHAR2(50), -- 글쓴이 아이디  
`chat_writerNick` VARCHAR2(50), -- 글쓴이 닉네임  
`content_type` number default 0,  -- 채팅 내용 종류 (0 = 일반내용 , 1 = 공지내용)  
`readCount` number,  -- 현재 읽지 않은 인원수  
`regdate` date default sysdate,  
constraint `pk_dk_chat_content` PRIMARY KEY(`chatContentNum`),    
constraint `fk_dk_chat_content` foreign key(`chatRoomNum`) references `dk_chat_room(chatRoomNum)` on delete cascade,  
constraint fk_chat_content_chat_writerId foreign key(chat_writerId) references dk_member(userId)   

);

create sequence seq_dk_chat_content;  

### 19) 채팅 내용 읽음 여부
create table dk_chat_read(  
 
`chatReadNum` number(10,0) PRIMARY KEY, --기본키 pk
`chatContentNum` number(10,0) NOT NULL, --fk  
`chatRoomNum` number(10,0) NOT NULL, --fk  
`chat_memberId` VARCHAR2(50) NOT NULL, -- 채팅룸 멤버 아이디  
`chat_memberNick` VARCHAR2(50) NOT NULL, -- 채팅룸 멤버 닉네임  
`read_type` number default 0, -- 메시지 읽음 여부 (0 = 읽지않음 , 1 = 읽음)  
constraint `fk_dk_chat_read_first` foreign key(`chatContentNum`) references `dk_chat_content(chatContentNum)` on delete cascade,      
constraint `fk_dk_chat_read_second` foreign key(`chatRoomNum`) references `dk_chat_room(chatRoomNum)` on delete cascade,    
constraint fk_chat_read_chat_memberId foreign key(chat_memberId) references dk_member(userId)    

);  

create sequence seq_dk_chat_read;  
